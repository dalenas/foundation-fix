\documentclass[12pt, letterpaper]{report}
\setlength{\headheight}{14.5pt}

\iffalse All to do

-----RIGHT NOW (THUR/FRI)
HARDWARE: 
    second iteration    - add cads
                        - add commentary
    third iteration     - add all final cads
SOFTWARE:
    first iteration     - add a small paragraph for each Parts
    second iteration    - lofi/midfi designs - find out what this is and add them
                        - figure out how to represent the basic logic and Functionality
    third iteration     - website link and github link
ELECTRICAL:
    first iteration     - add small description to all Specifications
    second iteration    - circuit building pictures and process explanation
    third iteration     - commentary


ABSTRACT            - revise and add citations
INTRODUCTION 
    research        - add more citations and facts
    design choices  - Draft

-----RIGHT AFTER BUILDING FINAL
Hardware Design and Specifications
    third iteration 
                    - add final Drawings
                    - commentary

Software Design
    third iteration     - commentary for final part

electrical systems design
                        - final power Calculations
                        - circuitry picture and description

final Product
    - record testing Protocol
    - describe Integration
    - record system performance and adjustments needed

Discussion
    - faults with Product
    - future work to be done

Conclusion
    - write one or two paragraphs
    - UPDATE BOM AS WE GO

\fi

%---------PACKAGES-------------
\usepackage{indentfirst}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[margin=1in]{geometry}
%\usepackage{1modern}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{float}
\usepackage{caption}
\usepackage{booktabs}
\usepackage{amsmath, amssymb}
%\usepackage{sinuitx}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{lineno}
\usepackage{tocloft}
\usepackage{titlesec}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{cite} % Optional: helps handle multiple citations compactly, e.g., [1, 2, 3] becomes [1-3]


%----------HYPERREF-----------
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=blue,
    urlcolor=blue,
    pdftitle={Foundation Mixer -- Engineering Report},
    pdfauthor={
        Akhil Nandhakumar, Allyson Lay, Dalen Avrin Smith, Elizabeth Yancey,
        Emma Shin, Harmeet Singh, Ival Momoh, Jay Kim, Richard Tokiyeda, Victoria Sun
    }
}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textit{Theta Beta Engineer Project}}
\fancyhead[R]{\textit{Draft -- 0.1}}
\fancyfoot[C]{\thepage}

\title{
    \textbf{Theta Beta Engineer Project Report}\\[0.5em]
    \large Foundation Color Identifier and Dispenser\\
    University of California, Irvine
}
\author{
    Akhil Nandhakumar, Allyson Lay, Dalen Avrin Smith,\\
    Elizabeth Yancey, Emma Shin, Harmeet Singh, Ival Momoh,\\
    Jay Kim, Richard Tokiyeda, Victoria Sun
}
\date{November 17, 2025}

\begin{document}

    \maketitle
    \pagenumbering{roman}

    \linenumbers

    \tableofcontents
    \listoffigures
    \listoftables
    \newpage

    \pagenumbering{arabic}

    %===========================ABSTRACT===========================
    \chapter{Abstract}
    
    
    The Foundation Identifier and Dispenser aims to develop a machine that is able to
    extract samples from a picture of a human to determine the shade of their skin, allowing
    the machine to dispense a corresponding foundation shade. The results produced
    should be both accurate and reproducable. Equipped with computer vision libraries
    and color correction algorithms, the system allows the user to take an picture alongside 
    a reference color sheet, which has colors of known values. These captured values are 
    processed to correct both camera bias, and lighting correction so that results
    may remain consistent regardless of lighting conditions during image capture. The system
    converts RGB values to LAB values, which are higher in accuracy in physical color 
    mixing, as opposed to RGB, which is used to describe pixel colors. The program calculates
    how much of each color is needed to recreate the user's skin pigment. These pigments are
    then dispensed via a mechanical system comprised of a Raspberry Pi, servo motors, and 
    syringes. This project demonstrates an application of computer vision in the cosmetic
    market to alleviate the burden of overconsumption and promote inclusivity. 

    %===========================INTRODUCTION===========================

    \chapter{Introduction}

    \section{Research}
    \subsection{Background of Problem}
    
    Testing foundation colors can be a frustrating experience for many, who are unable to find
    the perfect balance. At the end of the day, no line of foundation can realistically
    provide colors that cater to every possible skin tone. The seemingly unresolvable desire
    for a perfect shade leads many makeup users to spend hundreds on shades that are "close enough."
    This leads to lots of waste, not just in money, but in bottles thrown out after purchase because
    the match was ultimately unsatisfying. 

    The beauty industry produces 120 billion packaging units per year and 95\% of this these units
    are discarded, as opposed to recycled \cite{SmithS}. In addition, traditionally a custom skin matched foundation 
    can cost anywhere from \$60-100 per bottle, which leaves the consumers with the dilemma of whether they should
    take the gamble on the bottle that's just almost right versus breaking their wallet on a hand matched bottle. 
    Our custom mixer machine offers the same accuracy in skin tone while also promoting cheaper makeup,
    sustainability, and waste-reduction. 

    Our foundation color picker abandons the concept of creating a set of discrete skin tones to choose from,
    instead, opting for custom mixed shades depending on the skin color detected by a picture. 
    It also offers the unique ability to sample a shade without having to commit to a full sized bottle. 


    \subsection{Existing Solutions}
    BoldHue provides an option for an AI powered foundation mixer. It matches skin tone through a smart wand 
    that detects color. What they promised was millions of shades and the ability to store user's shades in profiles.
    However, their color detection methods provide room for lots of error because color isn't percieved the same depending
    on the lighting of the room, as well as the high cost of their machine. 

    Our product will have built in lighting correction that removes biases from the camera and uses the Macbeth Color Reference sheet 
    as a set of control colors. The reference sheet is what will allow the machine to recallibrate it's understanding of what colors
    are being percieved. 
    

    \section{Design Choices}
    \subsection{Past Considerations and Scrapped Plans}

    %===========================HARDWARE DESIGN===========================

    \chapter{Hardware Design and Specifications}

    \section{First Iteration}
    \subsection{Initial CAD Model and Hand Sketches}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/ME_init_sketch_housing.png}
        \caption{First Sketch: Housing}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/first_it/ME_init_cad_housing1.png}
        \includegraphics[width=0.4\textwidth]{assets/first_it/ME_init_cad_housing2.png}
        \caption{First CAD Models: Housing}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/ME_init_sketch_dispenser.png}
        \caption{First Sketch: Dispenser Systems}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/ME_init_cad_dispenser.png}
        \caption{First CAD Models: Dispenser Systems}
    \end{figure}
    \subsection{Commentary}

    Our first CAD Models were very simple and provide the most general idea 
    we had at our projects conception. We made large changes to the design of
    the housing because the dimensions would have been much wider if we lined
    the syringes up, as shown in Figures 3.1 and 3.2.

    The preliminary sketch we have of the dispenser system has stayed consistent
    throughout development. 
    \pagebreak
    
    \section{Second Iteration}
    
    \subsection{Updated CAD Models}
    \textbf{\textit{Assembly}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/second_it/ME_full_assembly.png}
        \caption{Second Iteration: Full Assembly}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/second_it/ME_exploded.png}
        \caption{Second Iteration: Exploded View}
    \end{figure}
    \pagebreak

    \textbf{\textit{Housing}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/second_it/ME_housing_skeleton.png}
        \includegraphics[width=0.32\textwidth]{assets/second_it/ME_housing_walls.png}
        \caption{Second Iteration: Housing Skeleton and Walls}
    \end{figure}

    \textbf{\textit{Dispenser}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/second_it/ME_guide_shaft_bracket.png}
        \includegraphics[width=0.25\textwidth]{assets/second_it/ME_syringe_holder_bracket.png}
        \includegraphics[width=0.25\textwidth]{assets/second_it/ME_syringe_plunger_bracket.png}
        \caption{Second Iteration: Brackets for Dispenser System}
    \end{figure}

    \subsection{Commentary}
    \textbf{\textit{Housing}}

    The housing skeleton is what holds the syringes in place while the walls create an enclosure
    so that the internal structure may be protected and hidden from users. The main concern with 
    this iterations design was with the housing skeleton's stability. Since we were 3D printing 
    all parts for the demo, the empy spaces could be flimsy, so the final iteration includes a 
    redesign. 
    \pagebreak

    \textbf{\textit{Dispenser}}

    These brackets hold and control the dispenser system. The first L-shaped Bracket holds 
    the guide shaft in place. The other two are for stabilizing and pushing the syringe 
    plunger down. This second iteration is missing one of the parts but it will be shown 
    in the next section, along with final drawings of all parts. 

    \section{Third Iteration}
    \subsection{Final CAD Models}
    \textbf{\textit{Assembly}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=1\textwidth]{assets/third_it/ME_full_device_assembly.png}
        \caption{Final: Full Assembly \(Exploded\)}
    \end{figure}
    \pagebreak

    \textbf{\textit{Housing}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/third_it/ME_case_back_wall.png}
        \includegraphics[width=0.35\textwidth]{assets/third_it/ME_case_side_wall.png}
        \caption{Housing: Walls}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/third_it/ME_case_lid.jpeg}
        \caption{Housing: Lid}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/third_it/ME_case_skeleton_frame.png}
        \caption{Housing: Skeleton}
    \end{figure}
    \pagebreak

    \textbf{\textit{Dispenser}}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.325\textwidth]{assets/third_it/ME_case_l_bracket.png}
        \includegraphics[width=0.375\textwidth]{assets/third_it/ME_l_bracket.png}
        \includegraphics[width=0.36\textwidth]{assets/third_it/ME_syringe_bracket.png}
        \includegraphics[width=0.35\textwidth]{assets/third_it/ME_plunger_bracket.png}
        \caption{Dispenser System : Brackets - for connecting to housing, guide shaft,
        stabilizing syringe, and pushing down syringe plunger}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/third_it/ME_dispenser_mechanism_assembly.png}
        \caption{Dispenser System : Full assembly}
    \end{figure}

    \subsection{Final Manufacturing Drawings for Custom Parts}
    \subsection{Commentary}


    %===========================SOFTWARE DESIGN==========================

    \chapter{Software Design}

    \section{First Iteration}
    \subsection{Preliminary Diagrams}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/CS_userflow.png}
        \caption{Initial Flowchart for Control Logic}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/CS_pseudocode1.png}
        \includegraphics[width=0.8\textwidth]{assets/first_it/CS_pseudocode2.png}
        \caption{Pseudocode: Image Processing Algorithms.}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/CS_pseudocode3.png}
        \caption{Pseudocode: Embedded System.}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/first_it/CS_ui-landing.png}
        \caption{Initial Figma Mockup: UI/UX - Landing page.}
    \end{figure}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.4\textwidth]{assets/first_it/CS_ui-load.png}
        \includegraphics[width=0.4\textwidth]{assets/first_it/CS_ui-color.png}
        \caption{Initial Figma Mockup: UI/UX - Loading the foundation shades.}
    \end{figure}

    \subsection{User Flow Diagram}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/CS_userflowfinal.png}
        \caption{User Flow Diagram}
    \end{figure}
    \subsection{Techstack}
    Operating systems: Linux on Raspberry Pi

    Libraries: OpenCV, NumPy, Pandas

    Frameworks: React, Flask

    Languages: Python

    
    \section{Second Iteration}
    \subsection{Lo-fi/Mid-fi Designs}
    \subsection{Basic Logic and Functionality}
    \subsection{Core Features of Algorithm}

    \section{Third Iteration}
    \subsection{Final Product}

    %===========================ELECTRICAL ENGINEERING DESIGN===========================

    \chapter{Electrical Systems Design}

    \section{First Iteration}
    \subsection{Initial Wiring Diagrams}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/first_it/EE_wiring.png}
        \caption{Preliminary Wiring Diagram}
    \end{figure}
    \subsection{Initial Power Calculations}
    \begin{table}[H]
        \centering
        \begin{tabular}{l l c}
            \toprule
            Parameter & Symbol & Value \\
            \midrule
            Phase Current & I & 0.7 \\
            Phase Resistance & R & 4.0 \\
            Phases & -- & 2 \\
            \bottomrule

        \end{tabular}
        \caption{Power Calculations}
        \label{tab:Electrical}
    \end{table}
    \[P_{motor}=2*I^2*R\]
    \[P_{motor}=2*(0.7)^2*4.0=3.92*5=19.6W\]
    \[P_{Raspberry Pi}=10W\]
    \emph{\[P_{total}=10+19.6=30W\]}

    


    \section{Second Iteration}
    \subsection{Circuit Building}

    \section{Third Iteration}
    \subsection{Final Wiring Diagrams}
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{assets/third_it/EE_second_wiringdiagrams.png}
        \caption{Final Wiring Diagrams}
    \end{figure}
    \subsection{Final Power Calculations}
    \subsection{Circuitry}

    %===========================FINAL PRODUCT===========================

    \chapter{Final Product}

    \section{Testing Protocol}

    \section{Integration}

    \section{System Performance}

    %===========================DISCUSSION===========================

    \chapter{Discussion}
    
    \section{Limitations}
    
    \section{Future Work}

    %===========================CONCLUSION===========================

    \chapter{Conclusion}

    %===========================BILL OF MATERIALS===========================

    \section{Bill of Materials}
    \begin{table}[H]
        \centering
        \begin{tabular}{l l c c}
            \toprule
            Component & Purpose & Quantity & Price \\ 
            \midrule
            2PC T8x8 Lead Screw with Brass Nut & Linear motion conversion & 3 & \$13.99 \\
            5-8mm Lead Screw Coupler 5 pack & Connect motor to screw & 3 & \$8.69 \\
            8x200mm Shaft Guide & Linear guidance & 3 & \$8.69 \\
            8mm Flange Mounted Pillow Block Bearing & Support rotating shaft & 3 & \$8.99 \\
            Raspberry Pi 5 (4GB RAM) & Primary controller & 1 & \$66.00 \\
            Plastic 30mL Syringes (Pack of 5) & Fluid handling prototype & 1 & \$6.99 \\
            Raspberry Pi 5 Power Supply & Power for controller & 1 & \$15.99 \\
            Assorted Metric Fasteners (M2â€“M5) & Mechanical assembly & 1 & \$20.00 \\
            Limit Switch (10 pack) & Motion limit detection & 1 & \$5.99 \\
            Arducam V3 Camera & Vision and monitoring & 1 & \$25.00 \\
            Wiring Kit & Electrical connections & 1 & \$5.00 \\
            Breadboard / Perfboard & Circuit prototyping & 1 & \$10.00 \\
            5V 3A DC Power Supply & General power source & 1 & \$7.47 \\
            5 Sets 28BYJ-48 Stepper + ULN2003 Driver & Secondary actuation system & 5 & \$14.99 \\
            1.75mm ABS Filament Reel (Black) & Structural printing material & 1 & \$16.99 \\
            \midrule
            \textbf{Total Estimated Cost} & & & \textbf{\$346.49} \\
            \bottomrule

        \end{tabular}
        \caption{Key Hardware Elements.}
        \label{tab:hardware}
    \end{table}

    %===========================REFERENCES===========================
    
    \chapter*{References}

    \addcontentsline{toc}{chapter}{References}

    \bibliographystyle{unsrt} % Use a numeric style, "unsrt" sorts by order of appearance
    \bibliography{authors} % Name of your .bib file (without the .bib extension)


\end{document}
